<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>国名しりとり探索（配布版）</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-800 p-4">
    <div class="max-w-md mx-auto space-y-4">
        <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-200">
            <h1 class="text-xl font-bold text-center text-blue-600 mb-4">国名しりとり探索器</h1>
            
            <div class="space-y-3">
                <input id="sw" placeholder="開始する国名 (任意)" class="w-full p-3 bg-gray-100 rounded-lg outline-none">
                <div class="grid grid-cols-2 gap-2">
                    <input id="sc" placeholder="開始字" class="p-3 bg-gray-100 rounded-lg text-center outline-none">
                    <input id="mc" placeholder="必須字" class="p-3 bg-gray-100 rounded-lg text-center outline-none">
                </div>
                <div class="flex justify-between items-center p-3 bg-gray-100 rounded-lg">
                    <span class="text-sm font-bold">長さ: <span id="lDisp">5</span></span>
                    <input type="range" id="lenRange" min="2" max="8" value="5" oninput="document.getElementById('lDisp').innerText=this.value" class="w-2/3">
                </div>
                <label class="flex items-center gap-2 text-sm cursor-pointer"><input type="checkbox" id="vo"> 濁点・半濁点無視</label>
                <label class="flex items-center gap-2 text-sm cursor-pointer"><input type="checkbox" id="lo"> 必須字を各1回のみ</label>
                <button onclick="run()" id="btn" class="w-full bg-blue-600 text-white font-bold py-4 rounded-xl shadow-md">探索実行</button>
            </div>
        </div>
        <div id="res" class="space-y-2"></div>
    </div>

    <script>
        async function run(){
            const btn=document.getElementById('btn'); btn.innerText="探索中...";
            const r=await fetch('/search',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({start_word:document.getElementById('sw').value,start_char:document.getElementById('sc').value,must_char:document.getElementById('mc').value,ignore_voiced:document.getElementById('vo').checked,limit_one:document.getElementById('lo').checked,max_len:document.getElementById('lenRange').value})});
            const d=await r.json(); btn.innerText="探索実行";
            document.getElementById('res').innerHTML = d.routes.length ? d.routes.map(rt=>`<div class="bg-white p-3 rounded-lg border text-sm">${rt.join(' → ')}</div>`).join('') : '<p class="text-center text-gray-400">なし</p>';
        }
    </script>
</body>
</html>
